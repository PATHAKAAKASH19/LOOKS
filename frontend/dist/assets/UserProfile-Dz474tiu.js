import{u as j,r as i,j as e,C as r,f as b,I as m,n as u}from"./index-DXygbHet.js";import{C}from"./index-CU6HXnsv.js";import{A as y}from"./index-B6xEgzxw.js";import{u as g}from"./UserInfoContext-uXsENF6b.js";function U(){const{accessToken:f}=j(),[n,h]=i.useState({firstName:"",lastName:"",email:"",phoneNo:""}),[s,N]=i.useState(!0),{userInfo:a,setUserInfo:d}=g();i.useEffect(()=>{a&&Object.keys(a).length!==0&&h({firstName:a.firstName||"",lastName:a.lastName||"",email:a.email||"",phoneNo:a.phoneNo||""})},[a,s]);const c=()=>{N(t=>!t)},l=t=>{h(o=>({...o,[t.target.name]:t.target.value}))},p=async t=>{try{t.preventDefault();const o=await fetch("/api/user/",{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${f}`},body:JSON.stringify(n)}),x=await o.json();o.status===200&&(d(x.userData),u.success(`${x.message}`),c())}catch(o){u.error(`${o.message}`)}};return i.useEffect(()=>{window.scrollTo(0,0)},[]),e.jsxs(r,{className:"user-profile-box",children:[e.jsx(b,{}),s?e.jsx(C,{onClick:c,className:"edit-icon"}):e.jsx(y,{onClick:c,className:"edit-icon"}),e.jsxs("form",{onSubmit:p,children:[e.jsxs(r,{className:"flex-box",children:[e.jsx("label",{htmlFor:"firstName",children:"First Name"}),e.jsx(m,{type:"text",name:"firstName",value:n.firstName,onChange:l,disabled:s,id:"firstName"})]}),e.jsxs(r,{className:"flex-box",children:[e.jsx("label",{htmlFor:"lastName",children:"Last Name"}),e.jsx(m,{type:"text",name:"lastName",value:n.lastName,onChange:l,disabled:s,id:"lastName"})]}),e.jsxs(r,{className:"flex-box",children:[e.jsx("label",{htmlFor:"email1",children:"Email"}),e.jsx(m,{type:"text",name:"email",value:n.email,onChange:l,disabled:s,id:"email1"})]}),e.jsxs(r,{className:"flex-box",children:[e.jsx("label",{htmlFor:"phoneNo",children:"Phone No"}),e.jsx(m,{type:"text",name:"phoneNo",value:n.phoneNo,onChange:l,disabled:s,id:"phoneNo"})]}),!s&&e.jsx("button",{type:"submit",children:"Save"})]})]})}export{U as default};
