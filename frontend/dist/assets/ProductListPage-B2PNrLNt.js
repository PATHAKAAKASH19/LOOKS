import{r as o,b as F,j as e,C as c,I as P,c as k,d as I,S as $,L as E}from"./index-DXygbHet.js";import{P as R,s as T}from"./slugToStr-Bvc9roIM.js";import{T as v}from"./Title-Bbl53n5L.js";import{c as z,d as O,e as _}from"./index-5tVrfrma.js";import{c as V}from"./createSlug-_5_DawpL.js";import{C as W}from"./index-kMZjFclS.js";const M=o.forwardRef(({setSearchParams:g,isMobile:C,hideFilter:p},S)=>{const d={sizes:["S","M","L","XL","XXL"],material:["cotton","cotton blend","polyester","linen"],style:["checks","plain","printed","self-design","textured","geometric"],color:["grey","blue","brown","black","navy","purple","dark green","red","orange","light grey","light blue","green","beige","pink","olive","cream"],price:[499,999,1499,1999,899]},x={sizes:["28","30","32","34","36","40"],material:["cotton","cotton blend","polyster","linen","linen blend","poly blend"],style:["loose fit","regular fit","relaxed fit","slim fit"]},N=["trouser","jeans","joggers","shorts"],[w,h]=o.useState(d),[j,b]=o.useState({}),[u,y]=o.useState({}),{category:f}=F();o.useEffect(()=>{(()=>{N.includes(f)?h(n=>({...n,...x})):h(n=>({...n,...d}))})()},[f]);const L=(t,n)=>{t.target.checked?b(r=>({...r,[n]:[...r[n]||[],t.target.name]})):b(r=>{var s;return{...r,[n]:(s=r[n])==null?void 0:s.filter(i=>i!==t.target.name)}})};o.useEffect(()=>{if(Object.keys(j).length!==0){const t=new URLSearchParams;for(const[n,r]of Object.entries(j))r.length>0?r.forEach(s=>{t.append(`${n}`,s)}):t.delete(`${n}`);g(t)}},[j]);const m=(t,n,r)=>{y(s=>({...s,[n]:r})),t.target.scrollIntoView({behavior:"smooth"})};return o.useEffect(()=>{window.scrollTo(0,0)},[u]),e.jsx("div",{className:"filter-sec",ref:S,children:e.jsxs(c,{className:"filterBox",children:[Object.entries(w).map(([t,n])=>e.jsxs(c,{className:"Box",children:[e.jsxs(c,{className:"box-icon-con",children:[e.jsx(v,{title:t,className:"box-title"}),u[t]?e.jsx(z,{onClick:r=>m(r,t,!1)},`${t}_minus`):e.jsx(O,{onClick:r=>m(r,t,!0)},`${t}_plus`)]}),u[t]?e.jsx(c,{className:"sub-box",children:n.map((r,s)=>e.jsxs(c,{children:[e.jsx(P,{type:"checkbox",id:r,name:`${r}`,onChange:i=>L(i,t)}),e.jsx("label",{htmlFor:r,children:r})]},`${s}_${t}`))}):null]},`${t}_tfgf`)),C&&e.jsxs(c,{className:"filter-button",children:[e.jsx("button",{type:"button",onClick:p,children:"close"}),e.jsx("button",{type:"button",onClick:p,children:"apply"})]})]})})}),B=M;function U(){const{category:g}=F(),{pathname:C}=k();o.useEffect(()=>{window.scrollTo(0,0)},[C]);const[p,S]=o.useState(""),[d,x]=o.useState(null),[N,w]=o.useState(!0),[h,j]=o.useState(window.innerWidth<700),[b,u]=o.useState(!1),[y,f]=o.useState(!1),L=o.useRef(null),[m,t]=I();o.useEffect(()=>{g&&(async()=>{try{w(!0);const i=T(g),a=await fetch(`https://looks.akash-pathak.xyz//api/category?category=${i}`),{categoryValue:l}=await a.json();l&&S(l[0]._id)}catch(i){console.log("error",i)}})()},[g]),o.useEffect(()=>{(async()=>{try{let i;if(m&&(i=m?m.toString():null),p){const a=await fetch(`https://looks.akash-pathak.xyz//api/product/category/${p}?${i}`),l=await a.json();a.status===200&&(x(l),w(!1))}}catch(i){console.log("error:",i)}})()},[m,p]),o.useEffect(()=>{const s=()=>{j(window.innerWidth<700)};return window.addEventListener("resize",s),()=>{window.removeEventListener("resize",s)}},[]);const n=()=>{u(!1)},r=s=>{x(s==="ascending"?i=>[...i].sort((a,l)=>a.price-l.price):i=>[...i].sort((a,l)=>l.price-a.price)),d&&f(!1)};return e.jsx(c,{className:"product-list-container",children:N?e.jsx($,{}):e.jsx(e.Fragment,{children:d&&d.length>0?e.jsxs(c,{className:"productList",children:[h&&!b&&e.jsxs(c,{className:"productList-icon-con",children:[e.jsxs(c,{children:[e.jsx(W,{className:"productList-icon",onClick:()=>f(s=>!s)}),e.jsx("h1",{onClick:()=>f(s=>!s),children:"SORT"})]}),e.jsx("div",{className:"line"}),e.jsxs(c,{children:[e.jsx(_,{className:"productList-icon",onClick:()=>u(s=>!s)}),e.jsx("h1",{onClick:()=>u(s=>!s),children:"FILTER"})]})]}),(!h||b)&&e.jsx(c,{className:"filterCon",children:e.jsx(B,{ref:L,isMobile:h,hideFilter:n,className:"filter",setSearchParams:t})}),h&&y&&e.jsx(c,{className:"sort-con",children:e.jsxs(c,{className:"sort",children:[e.jsx("h2",{onClick:()=>r("descending"),children:"Price : High to Low"}),e.jsx("h2",{onClick:()=>r("ascending"),children:"Price : Low to High"}),e.jsx("button",{onClick:()=>f(!1),children:"go back"})]})}),e.jsx(c,{className:"product-column",children:d.map(s=>e.jsx(R,{data:s,route:`/product/${V(s.name)}`},s._id))})]}):e.jsxs(c,{className:"product-list-error",children:[e.jsx("h2",{children:"nothing to show"}),e.jsx(E,{to:"/",className:"product-list-link",children:e.jsx("h2",{children:"Go to Home page"})})]})})})}export{U as default};
