import{u as w,r as n,j as e,C as r,f as g,L as k,n as a}from"./index-qZzDzbZj.js";import{u as S}from"./UserInfoContext-HTiHrqoD.js";import{A as C}from"./index-DZQUvU2G.js";function b(){const{accessToken:l}=w(),[c,d]=n.useState([]),[h,u]=n.useState(""),{userInfo:o,setUserInfo:j}=S(),x=["S","M","L","XL","XXL"];n.useEffect(()=>{o&&Object.keys(o).length!==0&&d(o.wishlist)},[o]);const m=async s=>{try{const t=await fetch("https://looks.akash-pathak.xyz/api/user/",{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${l}`},body:JSON.stringify({wishlistId:s,wishlistAction:"delete"})}),i=await t.json();console.log(i),t.status===200&&(j(i.userData),a.success("Product removed from wishlist"))}catch(t){a.error("error : ",t)}},f=async(s,t)=>{try{if(t){const i=await fetch("https://looks.akash-pathak.xyz/api/cart/",{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${l}`},body:JSON.stringify({productId:s,size:t})}),p=i.json();i.status===200&&(a.success(`${p.message}`),await m(s))}else a.error("please select a size")}catch(i){a.error("error : ",i)}},y=s=>{u(s.target.value)};return n.useEffect(()=>{window.scrollTo(0,0)},[]),e.jsxs(r,{className:"user-address-box ",children:[e.jsx(g,{}),c.length>0?c.map(s=>e.jsxs(r,{className:"wishlist-con",children:[e.jsx(C,{onClick:()=>m(s._id),className:"wishlist-icon"}),e.jsx(r,{className:"wishlist-img",children:e.jsx("img",{src:`${s==null?void 0:s.productImgUrls[0]}`,alt:`${s.name}`})}),e.jsx("h2",{children:s.name}),e.jsx("h3",{children:s.price}),e.jsxs("select",{value:h,onChange:y,children:[e.jsx("option",{value:"",children:"select size"}),x.map((t,i)=>e.jsx("option",{value:t,children:t},`${i}`))]}),e.jsx("button",{type:"button",onClick:()=>f(s._id,h),className:"wishlist-button",children:"Add to cart"})]},`${s._id}`)):e.jsxs(r,{className:"wishlist-con2",children:[e.jsx("h1",{children:"Your wishlist is empty"}),e.jsx("h2",{children:"Add items that you like to your wishlist. Review them anytime and easily move them to the bag."}),e.jsx(k,{to:"/",className:"link-con",children:"Continue Shopping"})]})]})}export{b as default};
