import{u as j,r as i,g as b,j as e,C as l,i as C,n as u}from"./index-DdXbiFkB.js";import{I as m}from"./InputBox-CRXJ9-E-.js";import{C as g}from"./index-4Lv3Bh_E.js";import{A as y}from"./index-D95-s8ii.js";function U(){const{accessToken:f}=j(),[n,h]=i.useState({firstName:"",lastName:"",email:"",phoneNo:""}),[s,N]=i.useState(!0),{userInfo:a,setUserInfo:d}=b();i.useEffect(()=>{a&&Object.keys(a).length!==0&&h({firstName:a.firstName||"",lastName:a.lastName||"",email:a.email||"",phoneNo:a.phoneNo||""})},[a,s]);const c=()=>{N(t=>!t)},r=t=>{h(o=>({...o,[t.target.name]:t.target.value}))},p=async t=>{try{t.preventDefault();const o=await fetch("http://localhost:3000/api/user/",{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${f}`},body:JSON.stringify(n)}),x=await o.json();o.status===200&&(d(x.userData),u.success(`${x.message}`),c())}catch(o){u.error(`${o.message}`)}};return i.useEffect(()=>{window.scrollTo(0,0)},[]),e.jsxs(l,{className:"user-profile-box",children:[e.jsx(C,{}),s?e.jsx(g,{onClick:c,className:"edit-icon"}):e.jsx(y,{onClick:c,className:"edit-icon"}),e.jsxs("form",{onSubmit:p,children:[e.jsxs(l,{className:"flex-box",children:[e.jsx("label",{htmlFor:"firstName",children:"First Name"}),e.jsx(m,{type:"text",name:"firstName",value:n.firstName,onChange:r,disabled:s,id:"firstName"})]}),e.jsxs(l,{className:"flex-box",children:[e.jsx("label",{htmlFor:"lastName",children:"Last Name"}),e.jsx(m,{type:"text",name:"lastName",value:n.lastName,onChange:r,disabled:s,id:"lastName"})]}),e.jsxs(l,{className:"flex-box",children:[e.jsx("label",{htmlFor:"email1",children:"Email"}),e.jsx(m,{type:"text",name:"email",value:n.email,onChange:r,disabled:s,id:"email1"})]}),e.jsxs(l,{className:"flex-box",children:[e.jsx("label",{htmlFor:"phoneNo",children:"Phone No"}),e.jsx(m,{type:"text",name:"phoneNo",value:n.phoneNo,onChange:r,disabled:s,id:"phoneNo"})]}),!s&&e.jsx("button",{type:"submit",children:"Save"})]})]})}export{U as default};
