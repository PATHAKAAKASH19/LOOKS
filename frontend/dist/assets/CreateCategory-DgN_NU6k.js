import{r as o,l as U,j as e,C as s,i as A,m as E,n as h}from"./index-DlYTwukh.js";import{I as N}from"./InputBox-mZfZvA47.js";import{T as m}from"./Title-DENLl2rL.js";function z(){const[n,c]=o.useState({category:"",trending:!1,subCategory:"topwear"}),[i,d]=o.useState(null),[f,l]=o.useState(""),[p,b]=o.useState(null),[$,y]=o.useState(!1),[C,j]=o.useState(!1),{sellerToken:g}=U(),x=a=>{c(t=>({...t,[a.target.name]:a.target.value.toLowerCase()}))},v=a=>{const t=a.target.files[0];d(t);const r=URL.createObjectURL(t);l(r)},w=async a=>{a.preventDefault();try{if(C){const t=new FormData;t.append("category",n.category),t.append("trending",n.trending),t.append("subCategory",n.subCategory),i&&(t.append("imgUrl",n.imgUrl),t.append("categoryImg",i));const r=await fetch(`http://localhost:3000/api/category/${n._id}`,{method:"PUT",headers:{Authorization:`Bearer ${g}`},body:t}),u=await r.json();r.status===200&&(y(u),c({category:"",trending:!1,subCategory:"topwear"}),l(""),d(null),j(!1),h.success(`${u.message}`))}else{const t=new FormData;t.append("category",n.category),t.append("trending",n.trending),t.append("subCategory",n.subCategory),t.append("categoryImg",i);const r=await fetch("http://localhost:3000/api/category",{method:"POST",headers:{Authorization:`Bearer ${g}`},body:t}),u=await r.json();r.status===201&&(y(u),c({category:"",trending:!1,subCategory:"topwear"}),l(""),d(null),h.success(`${u.message}`))}}catch(t){h.error(`${t.message}`)}},S=()=>{d(null),l("")},I=async a=>{try{const t=await fetch("http://localhost:3000/api/category",{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:`Bearer ${g}`},body:JSON.stringify(a)}),r=await t.json();t.status===200&&(y(!0),h.success(`${r.message}`))}catch(t){h.error(`${t.message}`)}};o.useEffect(()=>{(async()=>{try{const t=await fetch("http://localhost:3000/api/category/seller",{method:"GET",headers:{Authorization:`Bearer ${g}`}}),r=await t.json();t.status===200?(console.log(r),b(r.category),y(!1)):t.status===404&&b(null)}catch(t){console.log("error",t)}})()},[$,g]);const D=a=>{j(!0),l(a.imgUrl),c(a),window.scrollTo(0,0)},T=()=>{c({category:"",trending:!1,subCategory:"topwear"}),d(null),l(null),j(!1)};return o.useEffect(()=>{window.scrollTo(0,0)},[]),e.jsxs(s,{className:"admin-panel",children:[e.jsx(A,{}),e.jsxs(s,{className:"create-category",children:[e.jsx("h1",{children:"Create Category"}),e.jsxs("form",{onSubmit:w,children:[e.jsxs(s,{className:"input",children:[e.jsx("label",{htmlFor:"category",style:{alignSelf:"center"},children:"category"}),e.jsx(N,{id:"category",type:"text",name:"category",value:n.category,onChange:x,placeholder:"enter category name"})]}),e.jsxs(s,{className:"input",children:[e.jsx("label",{htmlFor:"trending",style:{alignSelf:"center"},children:"trending"}),e.jsxs("select",{id:"trending",name:"trending",onChange:x,value:n.trending,children:[e.jsx("option",{value:!1,children:"false"}),e.jsx("option",{value:!0,children:"true"})]})]}),e.jsxs(s,{className:"input",children:[e.jsx("label",{htmlFor:"sub-category",style:{alignSelf:"center"},children:"subCategory"}),e.jsxs("select",{id:"sub-category",name:"subCategory",value:n.subCategory,onChange:x,children:[e.jsx("option",{value:"topwear",children:"topwear"}),e.jsx("option",{value:"bottomwear",children:"bottomwear"}),e.jsx("option",{value:"accessories",children:"accessories"}),e.jsx("option",{value:"footwear",children:"footwear"}),e.jsx("option",{value:"watches",children:"watches"})]})]}),e.jsx(s,{className:"upload upload1",style:{alignSelf:"center"},children:e.jsxs("label",{className:"label",children:["upload image",e.jsx(N,{type:"file",name:"image",accept:"image/*",onChange:v,className:"uploadbox"},i?i.name:"file-input")]})}),f?e.jsxs(s,{className:"prevImg",children:[e.jsx("img",{src:f}),e.jsx(E,{onClick:S,className:"icon"})]}):null,C?e.jsxs(s,{className:"btn btn-con",children:[e.jsx("button",{type:"submit",className:"update up",onClick:w,children:"update"}),e.jsx("button",{type:"button",className:"delete del",onClick:()=>T(),children:"cancle"})]}):e.jsx("button",{type:"submit",children:"submit"})]})]}),p&&p.length>0&&e.jsxs(s,{className:"show-category",children:[e.jsxs(s,{className:"heading",children:[e.jsx(m,{title:"category"}),e.jsx(m,{title:"subCategory"}),e.jsx(m,{title:"trending"}),e.jsx(m,{title:"categoryImg"}),e.jsx(m,{title:"Action"})]}),p&&p.map((a,t)=>e.jsxs(s,{className:"row",children:[e.jsx("h3",{children:a.category}),e.jsx("h3",{children:a.subCategory}),e.jsx("h3",{children:`${a.trending}`}),e.jsx(s,{className:"category-img",children:e.jsx("img",{src:`${a.imgUrl}`})}),e.jsxs(s,{className:"btn",children:[e.jsx("button",{type:"submit",className:"update",onClick:()=>D(a),children:"update"}),e.jsx("button",{type:"submit",onClick:()=>I(a),children:"delete"})]})]},t))]})]})}export{z as default};
