import{u as p,r,j as e,C as o,f as g,L as S,n as a}from"./index-DXygbHet.js";import{u as C}from"./UserInfoContext-uXsENF6b.js";import{A}from"./index-B6xEgzxw.js";function k(){const{accessToken:l}=p(),[c,d]=r.useState([]),[h,u]=r.useState(""),{userInfo:n,setUserInfo:j}=C(),f=["S","M","L","XL","XXL"];r.useEffect(()=>{n&&Object.keys(n).length!==0&&d(n.wishlist)},[n]);const m=async s=>{try{const t=await fetch("/api/user/",{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${l}`},body:JSON.stringify({wishlistId:s,wishlistAction:"delete"})}),i=await t.json();console.log(i),t.status===200&&(j(i.userData),a.success("Product removed from wishlist"))}catch(t){a.error("error : ",t)}},x=async(s,t)=>{try{if(t){const i=await fetch("/api/cart/",{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${l}`},body:JSON.stringify({productId:s,size:t})}),w=i.json();i.status===200&&(a.success(`${w.message}`),await m(s))}else a.error("please select a size")}catch(i){a.error("error : ",i)}},y=s=>{u(s.target.value)};return r.useEffect(()=>{window.scrollTo(0,0)},[]),e.jsxs(o,{className:"user-address-box ",children:[e.jsx(g,{}),c.length>0?c.map(s=>e.jsxs(o,{className:"wishlist-con",children:[e.jsx(A,{onClick:()=>m(s._id),className:"wishlist-icon"}),e.jsx(o,{className:"wishlist-img",children:e.jsx("img",{src:`${s==null?void 0:s.productImgUrls[0]}`,alt:`${s.name}`})}),e.jsx("h2",{children:s.name}),e.jsx("h3",{children:s.price}),e.jsxs("select",{value:h,onChange:y,children:[e.jsx("option",{value:"",children:"select size"}),f.map((t,i)=>e.jsx("option",{value:t,children:t},`${i}`))]}),e.jsx("button",{type:"button",onClick:()=>x(s._id,h),className:"wishlist-button",children:"Add to cart"})]},`${s._id}`)):e.jsxs(o,{className:"wishlist-con2",children:[e.jsx("h1",{children:"Your wishlist is empty"}),e.jsx("h2",{children:"Add items that you like to your wishlist. Review them anytime and easily move them to the bag."}),e.jsx(S,{to:"/",className:"link-con",children:"Continue Shopping"})]})]})}export{k as default};
