import{u as N,r as w,j as s,C as d,i as b,n as t}from"./index-DlYTwukh.js";import{I as m}from"./InputBox-mZfZvA47.js";import{a as g}from"./index-B5Z8RfyY.js";import{a as f}from"./validate-DD9itGoP.js";function E(){const{accessToken:h}=N(),[r,i]=w.useState({newPassword:"",confirmNewPassword:""}),[l,n]=w.useState({password1:"",password2:""}),c=e=>{i(a=>({...a,[e.target.name]:e.target.value}))},P=(e,a)=>{e===!1&&n(o=>({...o,password1:"Password: ≥8 chars, A-Z, a-z, 0-9, & !@#$%^&*."})),a===!1&&n(o=>({...o,password2:"Password: ≥8 chars, A-Z, a-z, 0-9, & !@#$%^&*."}))},u=()=>{i({newPassword:"",confirmNewPassword:""}),n({password1:"",password2:""})},x=async e=>{e.preventDefault();try{if(!r.newPassword){t.error("Please provide new password");return}if(!r.confirmNewPassword){t.error("please provide confirm password");return}const a=f(r.newPassword),o=f(r.confirmNewPassword);if(a&&o)if(r.newPassword===r.confirmNewPassword){const p=await fetch("http://localhost:3000/api/auth/change-password/",{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${h}`},body:JSON.stringify({newPassword:r.newPassword})}),j=await p.json();if(p.status===200){t.success(`${j.message}`),u();return}}else{t.error("both password must be same");return}else P(a,o)}catch(a){console.log(a)}};return w.useEffect(()=>{window.scrollTo(0,0)},[]),s.jsxs(d,{className:"user-address-box password-con",children:[s.jsx(b,{}),s.jsxs("form",{onSubmit:x,className:"password-form-box",children:[s.jsxs(d,{className:"password-form-title",children:[s.jsx(g,{style:{fontSize:"25px"}}),s.jsx("label",{children:"Update your password for"}),s.jsx("label",{children:"pathakaakash8900@gmail.com"})]}),s.jsxs(d,{className:"password-form-field",children:[s.jsxs(d,{className:"field",children:[s.jsx("label",{htmlFor:"newPassword",children:"New Password"}),s.jsx(m,{type:"text",id:"newPassword",name:"newPassword",value:r.newPassword,onChange:c,placeholder:"Enter New Password"}),s.jsx("div",{children:l.password1})]}),s.jsxs(d,{className:"field",children:[s.jsx("label",{htmlFor:"confirmNewPassword",children:"Confirm New Password"}),s.jsx(m,{type:"text",id:"confirmNewPassword",name:"confirmNewPassword",value:r.confirmNewPassword,onChange:c,placeholder:"Confirm New Password"}),s.jsx("div",{children:l.password2})]})]}),s.jsx("button",{type:"submit",children:"update password"})]})]})}export{E as default};
